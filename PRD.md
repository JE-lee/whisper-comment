## **产品需求文档 (PRD) - "轻语评论" (WhisperComment)**

| **文档名称** | WhisperComment 产品需求文档 |
| :--- | :--- |
| **版本** | V1.0 |
| **创建日期** | 2025年7月9日 |
| **最后更新** | 2025年7月9日 |
| **作者** | Gemini |
| **状态** | 草案 |

---

### 1. 产品概述 (Overview)

#### 1.1 背景与问题陈述
当前市场上的主流SaaS评论系统（如Disqus）普遍存在功能臃肿、加载缓慢、侵犯用户隐私（广告追踪）等问题。同时，WordPress等原生评论系统又面临垃圾评论泛滥、互动体验差的困境。这些系统普遍要求用户登录或注册，这在“一次性”或“轻度”互动场景下形成了极高的参与门槛，导致大量读者“想说却懒得说”，网站的潜在互动价值被白白浪费。

#### 1.2 产品愿景与目标　
**愿景 (Vision)**: 成为下一代网站的互动基础设施，通过提供极致轻量、尊重隐私、高度互动的评论解决方案，将每个网站的访客转化为社区的参与者。

**目标 (Objectives)**:
* **O1: 提升客户网站的用户参与度**
    * **KR1**: 相较于传统评论系统，将评论转化率（发表评论的访客数 / 总访客数）提升30%。
    * **KR2**: 实现评论区内对话的平均深度（回复层级）达到1.5层以上。
* **O2: 为网站所有者（站长）提供卓越价值**
    * **KR1**: 实现99%的垃圾评论自动拦截率。
    * **KR2**: 保证嵌入脚本的加载时间在50ms以内，体积小于50KB (gzipped)。

#### 1.3 目标用户
1.  **内容创作者与独立博主**: 渴望与读者建立联系，但被现有工具的低互动率和复杂性所困扰。
2.  **中小型媒体与在线社区**: 需要构建活跃的站内讨论氛围，将一次性访客转化为忠实读者。
3.  **电商与产品着陆页**: 希望通过公开的售前问答（Q&A）降低客户决策成本，建立社会认同。

#### 1.4 核心差异化优势
相较于竞品（Commento, Cusdis等），“轻语评论”的核心优势在于其创新的**分层通知策略**和**面向未来的身份系统**，真正解决了匿名用户的持续互动和身份沉淀问题。

---

### 2. 功能需求 (Functional Requirements)

#### 2.1 核心评论体验 (终端用户)

| Feature ID | 功能名称 | 描述 | 优先级 |
| :--- | :--- | :--- | :--- |
| USR-001 | **匿名评论** | 用户无需注册或登录，仅需提供一个昵称即可发表评论。系统在浏览器LocalStorage中自动生成并存储一个`userToken`作为其匿名身份标识。 | **核心** |
| USR-002 | **评论编辑/删除** | 用户可在发表评论后的15分钟内，基于其`userToken`对自己发表的评论进行编辑或删除。 | **高** |
| USR-003 | **富文本格式** | 支持简单的Markdown语法，包括粗体、斜体、引用、链接和代码块，以提升表达能力。 | **高** |
| USR-004 | **表情回应** | 用户可以对评论使用表情（👍, ❤️, 🚀, 🤔）进行回应，替代单一的点赞。 | **中** |

#### 2.2 分层通知系统 (终端用户)

| Feature ID | 功能名称 | 描述 | 优先级 |
| :--- | :--- | :--- | :--- |
| N-001 | **Tier 1: 实时站内通知** | 当用户停留在页面时，通过WebSocket实时接收新回复的通知（如通知中心小红点）。此功能默认开启，零摩擦。 | **核心** |
| N-002 | **Tier 2: 浏览器推送通知** | 当用户首次评论后，系统会非侵入式地询问用户是否愿意接收离线通知。用户授权后，即使关闭网页也能收到系统级推送。 | **高** |
| N-003 | **Tier 3: 邮件通知** | 在评论框下方提供**可选的**复选框和输入框，允许用户通过邮箱订阅回复通知。 | **中** |

#### 2.3 分层身份系统 (终端用户)

| Feature ID | 功能名称 | 描述 | 优先级 |
| :--- | :--- | :--- | :--- |
| ID-001 | **默认匿名身份** | 基于`LocalStorage`的`userToken`，实现同浏览器内的身份持久化。 | **核心** |
| ID-002 | **去中心化身份连接** | 提供“[ ✨ 使用数字身份连接 ]”选项，允许用户通过连接数字钱包（如MetaMask）进行签名，以其DID/公钥地址作为跨站、可移植的持久身份。 | **高 (V2.0)** |

#### 2.4 站长管理后台 (SaaS客户)

| Feature ID | 功能名称 | 描述 | 优先级 |
| :--- | :--- | :--- | :--- |
| ADM-001 | **评论审核与管理** | 提供仪表盘，对评论进行搜索、筛选、批准、标记为垃圾、删除、置顶等操作。 | **核心** |
| ADM-002 | **反垃圾评论设置** | 配置反垃圾引擎的严格等级、设置关键词/IP黑名单、设定评论速率限制、在可疑情况下自动启用CAPTCHA。 | **核心** |
| ADM-003 | **外观定制** | 允许站长自定义评论区的主题（明亮/暗黑）、主色调，以匹配其网站风格。 | **高** |
| ADM-004 | **数据分析** | 查看评论数趋势、热门讨论文章、社区情感分析等基础数据报告。 | **中** |
| ADM-005 | **集成与代码获取** | 轻松获取嵌入脚本代码，并提供API Key用于身份验证。未来提供Webhook和Slack集成。 | **中** |

---

### 3. 非功能性需求 (Non-Functional Requirements)

* **性能 (Performance)**:
    * 嵌入JS脚本 Gzipped 后体积 < 50KB。
    * 脚本加载方式为异步，不阻塞页面渲染 (non-blocking)。
    * API请求响应时间 (P95) < 200ms。
* **安全性 (Security)**:
    * 所有用户输入内容都必须进行严格的净化处理，防止XSS攻击。
    * 管理后台需有CSRF保护。
    * API接口使用HTTPS加密。
* **可扩展性 (Scalability)**:
    * 系统架构需能支撑高并发的评论和WebSocket连接。
    * 数据库设计需考虑未来千万级甚至亿级评论量的存储和查询性能。
* **隐私性 (Privacy)**:
    * 除非用户主动提供，否则不收集任何个人可识别信息（PII）。
    * 遵守GDPR等主流隐私法规，提供清晰的隐私政策。
* **可访问性 (Accessibility)**:
    * 评论区UI需符合WCAG 2.1 AA标准，支持键盘导航和屏幕阅读器。

---

### 4. 发布计划 (Phased Rollout)

* **V1.0 (MVP - 核心体验)**
    * 实现匿名评论（USR-001）、实时站内通知（N-001）。
    * 提供基础的站长管理后台（ADM-001）和反垃圾系统（ADM-002）。
* **V1.1 (体验增强)**
    * 上线浏览器推送通知（N-002）、评论编辑/删除（USR-002）、富文本格式（USR-003）。
* **V1.2 (SaaS价值深化)**
    * 上线站长数据分析仪表盘（ADM-004）和外观定制（ADM-003）。
* **V2.0 (未来愿景启动)**
    * 上线去中心化身份连接功能（ID-002），作为可选的登录方式。

---

### 5. 成功的度量指标 (Metrics for Success)

* **用户参与度**: 评论数/日活、回复率、平均对话深度、表情回应使用率。
* **客户成功度**: 客户留存率、净推荐值 (NPS)。
* **业务健康度**: 月度经常性收入 (MRR)、客户生命周期价值 (LTV)、客户获取成本 (CAC)。

---

### 6. 开放问题与假设

* **假设**: 用户对“浏览器推送通知”的授权弹窗接受度较高。
* **开放问题**: 在V2.0中，应优先支持哪些DID方法和区块链网络（如Ethereum, Solana, Polygon等）？
* **开放问题**: 如何设计“受信任访客”的声望算法，使其既能激励用户又不被滥用？